<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-12-02 Fri 15:24 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title></title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="b" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline17">1. starting-up&#x2013;basics</a>
<ul>
<li><a href="#orgheadline11">1.1. namespaces</a>
<ul>
<li><a href="#orgheadline1">1.1.1. starting up from a .clj source file</a></li>
<li><a href="#orgheadline8">1.1.2. calling dir</a></li>
<li><a href="#orgheadline9">1.1.3. simple namespaces moves</a></li>
<li><a href="#orgheadline10">1.1.4. eventually more complex, as you realize what your work will require</a></li>
</ul>
</li>
<li><a href="#orgheadline16">1.2. test sound</a>
<ul>
<li><a href="#orgheadline12">1.2.1. a definst template (noise, non-pitched)</a></li>
<li><a href="#orgheadline13">1.2.2. definst can take an envelope for scaling the ugen output&#x2013;using lin</a></li>
<li><a href="#orgheadline14">1.2.3. scale output using an env-gen</a></li>
<li><a href="#orgheadline15">1.2.4. define constant pink noise</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline23">2. shaping some basic sounds</a>
<ul>
<li><a href="#orgheadline19">2.1. play long white noise</a>
<ul>
<li><a href="#orgheadline18">2.1.1. example&#x2013;10 second version, long release?</a></li>
</ul>
</li>
<li><a href="#orgheadline20">2.2. build some 'pitched' synth instruments for playing chords</a></li>
<li><a href="#orgheadline21">2.3. saw waves are harmonically rich&#x2013;sine waves not so much&#x2026;</a></li>
<li><a href="#orgheadline22">2.4. here's a use of a built-in overtone library for making choices algorithmically</a></li>
</ul>
</li>
<li><a href="#orgheadline31">3. begin creating scheduled events</a>
<ul>
<li><a href="#orgheadline25">3.1. basic example</a>
<ul>
<li><a href="#orgheadline24">3.1.1. use 'at' to schedule chord events</a></li>
</ul>
</li>
<li><a href="#orgheadline27">3.2. schedule a single event</a>
<ul>
<li><a href="#orgheadline26">3.2.1. test out single event versions using 'at'</a></li>
</ul>
</li>
<li><a href="#orgheadline30">3.3. how do we establish a beat for scheduling events using metronome?</a>
<ul>
<li><a href="#orgheadline28">3.3.1. Preparing dissonant chords</a></li>
<li><a href="#orgheadline29">3.3.2. Schedule dissonant chords</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline44">4. miscellaneous experiments</a>
<ul>
<li><a href="#orgheadline35">4.1. Experiment with progression based on sawtooth synths</a>
<ul>
<li><a href="#orgheadline32">4.1.1. use sawtooth synths to play various chords</a></li>
<li><a href="#orgheadline33">4.1.2. chord progression number 3&#x2013;sawtooth intensive</a></li>
<li><a href="#orgheadline34">4.1.3. chord progression 4</a></li>
</ul>
</li>
<li><a href="#orgheadline43">4.2. chord progression 5</a>
<ul>
<li><a href="#orgheadline36">4.2.1. define a sawtooth random chord player</a></li>
<li><a href="#orgheadline37">4.2.2. chord progression 6</a></li>
<li><a href="#orgheadline38">4.2.3. chord progression 7</a></li>
<li><a href="#orgheadline39">4.2.4. develop a looping function</a></li>
<li><a href="#orgheadline40">4.2.5. make a sawtooth chord player</a></li>
<li><a href="#orgheadline41">4.2.6. define a preselected set of chords for progression 9</a></li>
<li><a href="#orgheadline42">4.2.7. refactor chord progressions to use a player-fn</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline47">5. from the 'sequencing' wiki tutorial</a>
<ul>
<li><a href="#orgheadline45">5.1. use kick on each beat of a metronome</a></li>
<li><a href="#orgheadline46">5.2. startup a metronome and check in with its beats as it runs</a></li>
</ul>
</li>
<li><a href="#orgheadline50">6. develop chords progressions (not "intro" enough&#x2013;should be moved elsewhere?)</a>
<ul>
<li><a href="#orgheadline49">6.1. start working with post tonal set classes</a>
<ul>
<li><a href="#orgheadline48">6.1.1. getting-started babel session</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline52">7. miscellaneous utilities and problems</a>
<ul>
<li><a href="#orgheadline51">7.1. all caps is a problem&#x2013;clojure is case sensitive</a></li>
</ul>
</li>
<li><a href="#orgheadline54">8. play piano in overtone</a>
<ul>
<li><a href="#orgheadline53">8.1. </a></li>
</ul>
</li>
<li><a href="#orgheadline55">9. stop all playing sound</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline17" class="outline-2">
<h2 id="orgheadline17"><span class="section-number-2">1</span> starting-up&#x2013;basics</h2>
<div class="outline-text-2" id="text-1">
<p>
When viewing this in emacs org-mode, you will see results for running
any block code; however, these results will not appear on the github
wiki (unless you click the 'Raw' tab at the top).
</p>
</div>

<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11"><span class="section-number-3">1.1</span> namespaces</h3>
<div class="outline-text-3" id="text-1-1">
<p>
A big part of really understanding how to build things in Clojure is
to understand namespaces. Learning about what namespaces are&#x2013;and
importantly, what's available to you "in" different namespaces&#x2013;is a
step that cannot be emphasized enough at the early stages of learning.
</p>
</div>
<div id="outline-container-orgheadline1" class="outline-4">
<h4 id="orgheadline1"><span class="section-number-4">1.1.1</span> starting up from a .clj source file</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
The key here will be having an functioning cider-repl open and
evaluating a main source file. In emacs, this involves visiting the
<code>post_tonal_definitions.clj</code> file in my
post<sub>tonal</sub><sub>overtone</sub>/src/post<sub>tonal</sub><sub>overtone</sub> directory. (Note, the
leiningen build template involves installing a basic core.clj file.
Learning how to best use this is not obvious at first).
</p>

<p>
But, even more significantly, you will want to develop a strong
concept of how to instantiate a namespace, and how to load in any code
you want to be working with from WITHIN the namespace declaration.
</p>

<p>
Here's one good example (note, the presence of overtone.live on your
machine or in your files is no minor thing! There should be a link to 
how to best deal with this for those times when you are starting up a
system that hasn't had overtone working for it yet. The simplest
answer is to&#x2013;once this project is cloned&#x2013;navigate to the directory
containing it and start up your lein repl/cider-jack-in from there.
</p>

<p>
Note that the first time you do this, there may be a lot of stuff to
download! You can also simply just:
</p>

<div class="org-src-container">

<pre class="src src-clojure">(use '<span style="color: #7CB8BB;">overtone.live</span>)
</pre>
</div>
<p>
)
</p>

<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">ns</span> <span style="color: #7CB8BB;">post_tonal_overtone.core</span>
  (<span style="color: #BFEBBF;">:use</span> <span style="color: #7CB8BB;">overtone.live</span>)
  (<span style="color: #BFEBBF;">:require</span> [<span style="color: #7CB8BB;">post_tonal_overtone.data.set_class_data</span> <span style="color: #BFEBBF;">:as</span> set-class]))
</pre>
</div>
<p>
Here's a slightly more messed up one. Can you spot the differences,
subtle and obvious?
</p>

<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">ns</span> <span style="color: #7CB8BB;">post-tonal-overtone.core</span>
  (<span style="color: #BFEBBF;">:use</span> <span style="color: #7CB8BB;">overtone.live</span>
        <span style="color: #7CB8BB;">overtone.inst.sampled-piano</span>

        <span style="color: #5F7F5F;">;;      </span><span style="color: #7F9F7F;">post-tonal-overtone.set-class-data</span>
        <span style="color: #5F7F5F;">;;      </span><span style="color: #7F9F7F;">post-tonal-overtone</span>
        <span style="color: #5F7F5F;">;;      </span><span style="color: #7F9F7F;">org.clojure/math.combinatorics "0.1.1"</span>
        <span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">is it necessary to load .repl?</span>
        <span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">if you want to call 'dir' and such un-prefixed</span>
        <span style="color: #5F7F5F;">;;      </span><span style="color: #7F9F7F;">clojure.repl</span>
        )
  (<span style="color: #BFEBBF;">:require</span> [<span style="color: #7CB8BB;">post_tonal_overtone.data.set_class_data</span> <span style="color: #BFEBBF;">:as</span> set-class]
            [<span style="color: #7CB8BB;">post_tonal_overtone.core</span> <span style="color: #BFEBBF;">:as</span> pt]))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline8" class="outline-4">
<h4 id="orgheadline8"><span class="section-number-4">1.1.2</span> calling dir</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
If you want to get a sense of what you have been bringing in, and want
to begin to get a sense of how namespaces really work, take a look at
what may be defined in a given namespace.
</p>
</div>
<ol class="org-ol"><li><a id="orgheadline2"></a>post<sub>tonal</sub><sub>overtone.core</sub><br  /><div class="outline-text-5" id="text-1-1-2-1">
<p>
Note, this will not necessarily produce the same results as below.
Why? What has to happen for all my nice handiwork to be loaded?
</p>
<div class="org-src-container">

<pre class="src src-clojure">(dir <span style="color: #7CB8BB;">post_tonal_overtone.core</span>)
</pre>
</div>
</div></li>
<li><a id="orgheadline3"></a><br  /><div class="outline-text-5" id="text-1-1-2-2">
<div class="org-src-container">

<pre class="src src-clojure">(dir <span style="color: #7CB8BB;">post_tonal_overtone.data.set_class_data</span>)
</pre>
</div>
</div></li>
<li><a id="orgheadline4"></a><br  /><div class="outline-text-5" id="text-1-1-2-3">
<div class="org-src-container">

<pre class="src src-clojure">(dir <span style="color: #7CB8BB;">post_tonal_overtone.probability_functions.finite-distributions</span>)
</pre>
</div>
</div></li>
<li><a id="orgheadline5"></a>overtone.live<br  /><div class="outline-text-5" id="text-1-1-2-4">
<div class="org-src-container">

<pre class="src src-clojure">(dir <span style="color: #7CB8BB;">overtone.live</span>)
</pre>
</div>
</div></li>
<li><a id="orgheadline6"></a>overtone.core&#x2013;same as overtone.live?<br  /><div class="outline-text-5" id="text-1-1-2-5">
<div class="org-src-container">

<pre class="src src-clojure">(dir <span style="color: #7CB8BB;">overtone.core</span>)
</pre>
</div>
</div></li>

<li><a id="orgheadline7"></a>clojure.core<br  /><div class="outline-text-5" id="text-1-1-2-6">
<div class="org-src-container">

<pre class="src src-clojure">(dir <span style="color: #7CB8BB;">clojure.core</span>)
</pre>
</div>
</div></li></ol>
</div>
<div id="outline-container-orgheadline9" class="outline-4">
<h4 id="orgheadline9"><span class="section-number-4">1.1.3</span> simple namespaces moves</h4>
<div class="outline-text-4" id="text-1-1-3">
<p>
For the moment, let's see what evaluating the following reveals.
</p>

<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">in-ns</span> 'user)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #DCDCCC; font-weight: bold;">*ns*</span>
</pre>
</div>

<p>
You'll discover that it is good practice to define a namespace at the
beginning of a file of related code. If you are working through this
in emacs org-mode babel, evaluate this now (The results of executing
on or within block will be telling).
</p>

<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">in-ns</span> '<span style="color: #7CB8BB;">post_tonal_overtone.core</span>)
</pre>
</div>

<p>
You can either call this in the CIDER repl, or from within a org-babel
block.
</p>

<p>
Now, you should check to see what went down (especially in a babel
block where it might not be obvious). If you have called code in the
REPL but not within a Babel block you may not always be in the right
place (note a discrepancy here).
</p>

<pre class="example">
#&lt;Namespace post_tonal_overtone.core&gt;
</pre>

<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #DCDCCC; font-weight: bold;">*ns*</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(dir <span style="color: #7CB8BB;">post_tonal_overtone.core</span>)
</pre>
</div>




<pre class="example">
chord-progression-time1
chord-progression-time10
chord-progression-time2
chord-progression-time3
chord-progression-time4
chord-progression-time5
chord-progression-time6
chord-progression-time7
chord-progression-time8
chord-progression-time9
looper
med96
metro
noisey-sustained
noisey2
play-chord-saw1
play-chord-sin2
saw-diss
saw1
sin3
sine-tetra-diss
some-midis
voice-and-transpose-rand-set
voice-rand-set
</pre>
</div>
</div>

<div id="outline-container-orgheadline10" class="outline-4">
<h4 id="orgheadline10"><span class="section-number-4">1.1.4</span> eventually more complex, as you realize what your work will require</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
note, that this is for the Babel session for the "getting-started"
program. Maybe don't evaluate this unless you are working with a
strong sense of what your namespace situation is.
</p>

<p>
Note, that as <span class="timestamp-wrapper"><span class="timestamp">[2015-04-14 Tue] </span></span> the use of hyphens vs. underscore is at issue.
</p>


<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">(ns post-tonal-overtone.core</span>
<span style="color: #5F7F5F;">;;   </span><span style="color: #7F9F7F;">(</span><span style="color: #BFEBBF;">:use</span><span style="color: #7F9F7F;"> overtone.live</span>
<span style="color: #5F7F5F;">;;         </span><span style="color: #7F9F7F;">overtone.inst.sampled-piano</span>
<span style="color: #5F7F5F;">;;      </span><span style="color: #7F9F7F;">post-tonal-overtone.set-class-data</span>
<span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">;;   post-tonal-overtone</span>
<span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">;;   org.clojure/math.combinatorics "0.1.1"</span>
<span style="color: #5F7F5F;">;;      </span><span style="color: #7F9F7F;">clojure.repl))</span>
</pre>
</div>

<p>
Note you can also just call this requirement in directly to whatever
namespace you happen to be in. Does this code cause nREPL to time out
for some reason?
</p>

<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #7CB8BB;">post_tonal_overtone.data.set_class_data</span><span style="color: #DCDCCC; background-color: #3F3F3F;">/</span>cmajtriads
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline16" class="outline-3">
<h3 id="orgheadline16"><span class="section-number-3">1.2</span> test sound</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-orgheadline12" class="outline-4">
<h4 id="orgheadline12"><span class="section-number-4">1.2.1</span> a definst template (noise, non-pitched)</h4>
<div class="outline-text-4" id="text-1-2-1">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">definst</span> <span style="color: #93E0E3;">noisey2</span> [attack 0.01 sustain 0.4 release 0.1 vol 0.4 length 3] 
  (* (env-gen (lin attack sustain release) 1 1 0 length <span style="color: #BFEBBF;">FREE</span>)
     (pink-noise) <span style="color: #7F9F7F;">; also have (white-noise) and others...</span>
     vol))

(noisey2)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline13" class="outline-4">
<h4 id="orgheadline13"><span class="section-number-4">1.2.2</span> definst can take an envelope for scaling the ugen output&#x2013;using lin</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
use of lin presents several default keyword args. When called as an
argument for env-gen as is you will get these default values that
basically make for a "sharp" sound, i.e. no gentle entrance and ending
to the sound.
</p>

<div class="org-src-container">

<pre class="src src-clojure">(lin <span style="color: #BFEBBF;">:attack</span> <span style="color: #BFEBBF;">:sustain</span> <span style="color: #BFEBBF;">:release</span> <span style="color: #BFEBBF;">:level</span> <span style="color: #BFEBBF;">:curve</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-4">
<h4 id="orgheadline14"><span class="section-number-4">1.2.3</span> scale output using an env-gen</h4>
<div class="outline-text-4" id="text-1-2-3">
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">not for evaluating?</span>
(env-gen <span style="color: #BFEBBF;">:envelope</span> <span style="color: #BFEBBF;">:gate</span> <span style="color: #BFEBBF;">:level-scale</span> <span style="color: #BFEBBF;">:level-bias</span> <span style="color: #BFEBBF;">:time-scale</span> <span style="color: #BFEBBF;">:action</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-4">
<h4 id="orgheadline15"><span class="section-number-4">1.2.4</span> define constant pink noise</h4>
<div class="outline-text-4" id="text-1-2-4">
<p>
You'll have to stop this on your own (if you want to!) by evaluating
the <code>(stop)</code> function below.
</p>

<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">definst</span> <span style="color: #93E0E3;">noisey-sustained</span> [vol 0.5] 
  (* (pink-noise) <span style="color: #7F9F7F;">; also have (white-noise) and others...</span>
     vol))

(noisey-sustained 1)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(stop)
</pre>
</div>

<p>
Since you might have to do this frequently (that is, stop some playing
sound), it's wise to create an emacs function or macro to invoke this quickly.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline23" class="outline-2">
<h2 id="orgheadline23"><span class="section-number-2">2</span> shaping some basic sounds</h2>
<div class="outline-text-2" id="text-2">
<p>
What sounds can you make with your computer? And how easily can you
figure out what they are and how to use them? I like to start with
white-noise.
</p>
</div>
<div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19"><span class="section-number-3">2.1</span> play long white noise</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Let's see how we can call the above function with some arguments.
</p>
</div>
<div id="outline-container-orgheadline18" class="outline-4">
<h4 id="orgheadline18"><span class="section-number-4">2.1.1</span> example&#x2013;10 second version, long release?</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
Experimenting with different parameter values reveals that there are
some mechanics to the <code>env-gen</code> function. What's happens when we use
an attack of '0.4' and a sustain of '0?'
</p>

<p>
Sounds like a pleasant (and quiet, depending on how loud your system is
turned up) wave just rolled up?
</p>
<div class="org-src-container">

<pre class="src src-clojure">(noisey2 <span style="color: #BFEBBF;">:attack</span> 0.4 <span style="color: #BFEBBF;">:sustain</span> 0 <span style="color: #BFEBBF;">:release</span> 0.7 <span style="color: #BFEBBF;">:vol</span> 0.3 <span style="color: #BFEBBF;">:length</span> 10)
</pre>
</div>


<p>
Sounds like percussion now?
</p>
<div class="org-src-container">

<pre class="src src-clojure">(noisey2 <span style="color: #BFEBBF;">:attack</span> 0 <span style="color: #BFEBBF;">:sustain</span> 0 <span style="color: #BFEBBF;">:release</span> 0.1 <span style="color: #BFEBBF;">:vol</span> 0.3 <span style="color: #BFEBBF;">:length</span> 1)
</pre>
</div>

<p>
Wouldn't it be nice to be able to experiment with different values for
these things in some way other than typing values at the keyboard?
We'll have to get to this.
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline20" class="outline-3">
<h3 id="orgheadline20"><span class="section-number-3">2.2</span> build some 'pitched' synth instruments for playing chords</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Really understanding <code>definst</code> will take some time. Here are some
quick sound examples that use <code>sin-osc</code> and <code>saw</code> to produce those
respective waveforms, which now will allow us to use actual
frequencies and pitches.
</p>

<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">definst</span> <span style="color: #93E0E3;">sin1</span> [freq 880 attack 0.1 sustain 0.15 release 0.25 vol 0.4 length 5]
  (* (env-gen (lin attack sustain release) 1 1 0 length <span style="color: #BFEBBF;">FREE</span>)
     (sin-osc freq)
     vol))

(sin1)
</pre>
</div>

<p>
You can also give sin1 an argument:
</p>

<div class="org-src-container">

<pre class="src src-clojure">(sin1 330)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">definst</span> <span style="color: #93E0E3;">saw1</span> [freq 330 attack 0.3 sustain 0.15 release 0.25 vol 0.2 length 5]
  (* (env-gen (lin attack sustain release) 1 1 0 length <span style="color: #BFEBBF;">FREE</span>)
     (saw freq)
     vol))

(saw1)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline21" class="outline-3">
<h3 id="orgheadline21"><span class="section-number-3">2.3</span> saw waves are harmonically rich&#x2013;sine waves not so much&#x2026;</h3>
<div class="outline-text-3" id="text-2-3">
<p>
The above options give us comparatively straightforward sounds.
However, they are not necessarily very pleasant or interesting by
themselves. If you're interested right now, we can play around a
little with a saw wave, just to give any idea of other ways you can
get sounds.
</p>

<p>
Play with evaluating both of these repeatedly. Because we are now
using a filtering object&#x2013;and most importantly, because there is now
some randomness in the equation&#x2013;you now start to hear a slightly
different quality to the sound, as well as some slight variations as
you progressively evaluate it.
</p>

<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">definst</span> <span style="color: #93E0E3;">saw2</span> [freq 220 attack 0.3 sustain 0.15 release 0.25 vol 0.1 length 5]
  (* (bpf (* (env-gen (lin attack sustain release) 1 1 0 length <span style="color: #BFEBBF;">FREE</span>)
             (saw freq)
             (* 10 (inc (rand-int 10)))
             (* 0.01 (inc (rand-int 10)))))
     vol))


(saw2)
</pre>
</div>

<pre class="example">
evaluating clojure/babel blocks can be annoying if they block your navigation in emacs. If this happens, try evaluating the blocks that don't contain the definst as well as the function call.
</pre>

<div class="org-src-container">

<pre class="src src-clojure">(saw2)
</pre>
</div>

<p>
Just to compare against the unfiltered version with no envelope:
</p>
<div class="org-src-container">

<pre class="src src-clojure">(demo 0.5 (saw 220))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline22" class="outline-3">
<h3 id="orgheadline22"><span class="section-number-3">2.4</span> here's a use of a built-in overtone library for making choices algorithmically</h3>
<div class="outline-text-3" id="text-2-4">
<div class="org-src-container">

<pre class="src src-clojure">(saw2 (<span style="color: #7CB8BB;">overtone.algo.chance</span><span style="color: #DCDCCC; background-color: #3F3F3F;">/</span>ranged-rand 300 302) <span style="color: #BFEBBF;">:vol</span> 0.3)
</pre>
</div>

<p>
Giving it a different envelope begins to give it another quality as
well, as if a kind simple little synthesizer.
</p>
<div class="org-src-container">

<pre class="src src-clojure">(demo (bpf (* (env-gen (lin 0.0 0.2 0.3)) (saw)) 800 0.3))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline31" class="outline-2">
<h2 id="orgheadline31"><span class="section-number-2">3</span> begin creating scheduled events</h2>
<div class="outline-text-2" id="text-3">
<p>
To really make music, we're going to have to understand how to get
things to play in time, without simply triggering everything at the
REPL. That means we are going to have to schedule things.
</p>

<p>
And to really understand how to use scheduling we'll ultimately need
to look at some other files that are dedicated to this pursuit. For
now, here are some quick examples
</p>
</div>
<div id="outline-container-orgheadline25" class="outline-3">
<h3 id="orgheadline25"><span class="section-number-3">3.1</span> basic example</h3>
<div class="outline-text-3" id="text-3-1">
<p>
There are two keys functions to wrap your head around: <code>at</code> and
<code>metro.</code> Let's start with <code>at</code>.
</p>
</div>

<div id="outline-container-orgheadline24" class="outline-4">
<h4 id="orgheadline24"><span class="section-number-4">3.1.1</span> use 'at' to schedule chord events</h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
Simply, we can use the <code>at</code> function to schedule some events relative
to a given starting point (which will be determined by calling <code>now</code>).
Note that below, we are hard-coding in the offsets, which means that
this won't be especially useful for more than a few listens.
</p>

<p>
However, it neatly demonstrates that time can be quite nicely
quanitified&#x2013;here in milliseconds.
</p>

<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">first let's make an instrument to play chords.</span>
<span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">note, we are using midi-&gt;hz because synths will tend to expect</span>
<span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">arguments in hz</span>

<span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">Note, that sin1 was defined early</span>

(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">play-chord-sin2</span> [a-chord]
  (<span style="color: #F0DFAF; font-weight: bold;">doseq</span> [note a-chord] (sin1 (midi-&gt;hz note))))
</pre>
</div>

<p>
Here is the sine instrument at work, demonstrating the fact that it
will take midi number arguments and convert it to Hertz.
</p>

<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">bring the dogs running!</span>
(sin1 (midi-&gt;hz 96))
</pre>
</div>

<p>
And here's an interesting 7-note chord
</p>
<div class="org-src-container">

<pre class="src src-clojure">(play-chord-sin2 [64 76 81 86 91 96 101])
</pre>
</div>

<p>
Now, here's a progression. 
</p>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">chord-progression-time1</span> []
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [time (now)]
    (at time          (play-chord-sin2 [68 81 46 50 88]))
    (at (+ 2000 time) (play-chord-sin2 [80 69 46 73 86]))
    (at (+ 4000 time) (play-chord-sin2 [68 59 48 85 64]))
    (at (+ 6000 time) (play-chord-sin2 [68 69 72 87 52]))
    (at (+ 8000 time) (play-chord-sin2 [89 55 45 60 62]))))

(chord-progression-time1)
</pre>
</div>

<p>
Note that having to type all this out every time would be a pain. And
ultimately, there are a lot of things we might like to change about
this. For one thing, wouldn't it be nice to know more about those
chords?
</p>

<p>
And of course, most importantly, we want to make it easier to work
with such progressions. One way to do that is to make progression that
deal with time more robustly. We'll get there.
</p>

<p>
(When using this file from within emacs, we can take advantage of
org-mode and emacs kmacro and functions to make it a little more
fluid, eventually maybe even treating it like an instrument!)
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline27" class="outline-3">
<h3 id="orgheadline27"><span class="section-number-3">3.2</span> schedule a single event</h3>
<div class="outline-text-3" id="text-3-2">
</div><div id="outline-container-orgheadline26" class="outline-4">
<h4 id="orgheadline26"><span class="section-number-4">3.2.1</span> test out single event versions using 'at'</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
Here's a test of making a chord progression function that take an
instrument (with a whole series of default keyword arguments
hard-coded in&#x2013;eek!) as an argument instead.
</p>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">chord-progression-time2</span> [inst]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [time (now)]
    (at time (inst <span style="color: #BFEBBF;">:attack</span> 0.15 <span style="color: #BFEBBF;">:sustain</span> 0.2 <span style="color: #BFEBBF;">:release</span> 0.4 <span style="color: #BFEBBF;">:vol</span> 0.5 <span style="color: #BFEBBF;">:length</span> 10))))

(chord-progression-time2 sin1)
</pre>
</div>


<div class="org-src-container">

<pre class="src src-clojure">(chord-progression-time2 saw2)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline30" class="outline-3">
<h3 id="orgheadline30"><span class="section-number-3">3.3</span> how do we establish a beat for scheduling events using metronome?</h3>
<div class="outline-text-3" id="text-3-3">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">metro</span> (metronome 60))
</pre>
</div>

<p>
Understanding how to use the values that this produces gets at the
part of the overtone language that is at the heart of scheduling, and
is crucial to doing musical things&#x2013;to the extent that music happens
in time, or according to some constructed notion of time.
</p>

<p>
We will get to this. For now just observe that we have a special type
of named thing here:
</p>

<div class="org-src-container">

<pre class="src src-clojure">(type metro)
(metro)
</pre>
</div>
</div>

<div id="outline-container-orgheadline28" class="outline-4">
<h4 id="orgheadline28"><span class="section-number-4">3.3.1</span> Preparing dissonant chords</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
(Note: this functionality has largely been superseded elsewhere)
</p>

<p>
The function <code>sine-tetra-diss</code> will provide sets of pitches to a sine
instrument. The pitches are chosen from a local file (which is aliased
with <code>set-class.</code> We'll get to explaining this soon.)
</p>

<p>
Note that it also calls a special function for making voicings. There
is some functionality like this in overtone already, namely a
<code>rand-chord</code> function.
</p>

<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">A function to work with sets</span>
(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">voice-and-transpose-rand-set</span> [set-type tn-level]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [set (rand-nth set-type)
        voiced-set (map #(+ (rand-nth [36 48 60 72]) <span style="color: #DFAF8F;">%</span>) set)
        transposed-set (map #(+ tn-level <span style="color: #DFAF8F;">%</span>) voiced-set)
        set-voicing-group (list set voiced-set tn-level transposed-set)]
    (<span style="color: #F0DFAF; font-weight: bold;">do</span>
      (println set-voicing-group)
      (last set-voicing-group))))

(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">sine-tetra-diss</span> []
  (<span style="color: #F0DFAF; font-weight: bold;">doseq</span> [notes (voice-and-transpose-rand-set <span style="color: #7F9F7F;">; voicing</span>
                 <span style="color: #7CB8BB;">set-class</span><span style="color: #DCDCCC; background-color: #3F3F3F;">/</span>tetrachords
                       (rand-int 12))]
    (sin1 (midi-&gt;hz notes))))

(sine-tetra-diss)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline29" class="outline-4">
<h4 id="orgheadline29"><span class="section-number-4">3.3.2</span> Schedule dissonant chords</h4>
<div class="outline-text-4" id="text-3-3-2">
<p>
Define and use a chord progression player&#x2013;use 'apply-at.'
</p>

<p>
Note that this uses the sine-tetra-diss as a hard-coded 'instrument',
or rather an instrumentalist. As well, we call the progression with
the metro we defined above, which means that the tempo is determined
from there.
</p>

<p>
There one major thing not described here, which is how this can just
keep going. We'll get to that (it involves recursion, and that
<code>apply-at</code>). The main purpose here is to give us something interesting
to listen to.
</p>


<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">chord-progression-time8</span> [nome]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [beat (nome)]
    (at (nome beat) (sine-tetra-diss))
    (apply-at (nome (inc beat)) chord-progression-time8 nome [])))

<span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">to paraphrase "A Foggy Day", how long can this thing last?</span>
(chord-progression-time8 metro)
</pre>
</div>

<p>
How might we want to modify this? One of the first things we should
take care of is the ability to pass in a different instrument. That
is, playing chord progressions is a different concern from the sound
that will render those.
</p>

<p>
A lot depends on the nature of that instrument, which in this case
performs a series of calculations that are encapsulated and abstracted
away from our view. But a lot also depends on the means by which each
new chord is scheduled according to the relentless march of the
metronome. 
</p>

<p>
Since a metronome (or at least the old-fashioned physical ones) is
quite truly a mechanical thing, we are only going to get out a kind of
mechanical-sounding series of events. How we eventually improve this
is another matter.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline44" class="outline-2">
<h2 id="orgheadline44"><span class="section-number-2">4</span> miscellaneous experiments</h2>
<div class="outline-text-2" id="text-4">
<p>
The rest is mostly slight variation on the above. In a sense it shows 
the process that may have been used to arrive at the above, as these
various progressions were numbered, and the above one (which is the
preferred of these others) was number 8 in the series.
</p>

<p>
That will have to wait till we begin building a voice-leading engine,
and especially when we consider preparing scores of musical events all
at once. In such a situation, we are modeling musical time using a
rather different technique.
</p>
</div>

<div id="outline-container-orgheadline35" class="outline-3">
<h3 id="orgheadline35"><span class="section-number-3">4.1</span> Experiment with progression based on sawtooth synths</h3>
<div class="outline-text-3" id="text-4-1">
</div><div id="outline-container-orgheadline32" class="outline-4">
<h4 id="orgheadline32"><span class="section-number-4">4.1.1</span> use sawtooth synths to play various chords</h4>
<div class="outline-text-4" id="text-4-1-1">
<div class="org-src-container">

<pre class="src src-clojure">(map (rand-nth [saw1 saw2]) (map #(midi-&gt;hz <span style="color: #DFAF8F;">%</span>) (last (voice-rand-set <span style="color: #7CB8BB;">set-class</span><span style="color: #DCDCCC; background-color: #3F3F3F;">/</span>pentachords))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline33" class="outline-4">
<h4 id="orgheadline33"><span class="section-number-4">4.1.2</span> chord progression number 3&#x2013;sawtooth intensive</h4>
<div class="outline-text-4" id="text-4-1-2">
<p>
a lot of repetition with this one
</p>

<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">chord-progression-time3</span> [nome]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [beat (nome)]
    (at (nome beat)
        (<span style="color: #F0DFAF; font-weight: bold;">doseq</span> [note (rand-nth [[60 61 62] [60 49 51 55 44]])]
          (saw1 (midi-&gt;hz note))))
    (apply-at (nome (inc beat)) chord-progression-time3 nome [])))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(chord-progression-time3 metro)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline34" class="outline-4">
<h4 id="orgheadline34"><span class="section-number-4">4.1.3</span> chord progression 4</h4>
<div class="outline-text-4" id="text-4-1-3">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">chord-progression-time4</span> [nome]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [beat (nome)]
    (at (nome beat)
        (<span style="color: #F0DFAF; font-weight: bold;">doseq</span> [notes (voice-and-transpose-rand-set <span style="color: #7F9F7F;">; voicing</span>
                       <span style="color: #DFAF8F;">*tetrachords*</span> <span style="color: #7F9F7F;">; set-type</span>
                       (rand-int 12))]
          (saw1 (midi-&gt;hz notes))))
    (apply-at (nome (inc beat)) chord-progression-time4 nome [])))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(chord-progression-time4 metro)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline43" class="outline-3">
<h3 id="orgheadline43"><span class="section-number-3">4.2</span> chord progression 5</h3>
<div class="outline-text-3" id="text-4-2">
<p>
use a set of pitched chords
</p>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">some-midis</span> [[72 61 50 46] [60 49 51 55 44] [74 63 52 68] [42 79
70 61]])
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">chord-progression-time5</span> [nome]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [beat (nome)]
    (at (nome beat)
        (<span style="color: #F0DFAF; font-weight: bold;">doseq</span> [note (rand-nth some-midis)]
          (saw1 (midi-&gt;hz note))))
    (apply-at (nome (inc beat)) chord-progression-time5 nome [])))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(chord-progression-time5 metro)
</pre>
</div>
</div>

<div id="outline-container-orgheadline36" class="outline-4">
<h4 id="orgheadline36"><span class="section-number-4">4.2.1</span> define a sawtooth random chord player</h4>
<div class="outline-text-4" id="text-4-2-1">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">saw-diss</span> []
  (<span style="color: #F0DFAF; font-weight: bold;">doseq</span> [notes (voice-and-transpose-rand-set <span style="color: #7F9F7F;">; voicing</span>
                       <span style="color: #DFAF8F;">*tetrachords*</span> <span style="color: #7F9F7F;">; set-type</span>
                       (rand-int 12))]
    (saw1 (midi-&gt;hz notes))))
</pre>
</div>


<div class="org-src-container">

<pre class="src src-clojure">(saw-diss)
</pre>
</div>
</div>
</div>



<div id="outline-container-orgheadline37" class="outline-4">
<h4 id="orgheadline37"><span class="section-number-4">4.2.2</span> chord progression 6</h4>
<div class="outline-text-4" id="text-4-2-2">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">chord-progression-time6</span> [nome]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [beat (nome)]
    (at (nome beat) (saw-diss))
    (apply-at (nome (inc beat)) chord-progression-time6 nome [])))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(chord-progression-time6 metro)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline38" class="outline-4">
<h4 id="orgheadline38"><span class="section-number-4">4.2.3</span> chord progression 7</h4>
<div class="outline-text-4" id="text-4-2-3">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">chord-progression-time7</span> [nome sound]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [beat (nome)]
    (at (nome beat) sound)
    (apply-at (nome (inc beat)) chord-progression-time7 nome sound
[])))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(chord-progression-time7 metro saw-diss)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline39" class="outline-4">
<h4 id="orgheadline39"><span class="section-number-4">4.2.4</span> develop a looping function</h4>
<div class="outline-text-4" id="text-4-2-4">
<p>
The use of "metro" hardcoded in causes problems?
</p>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">looper</span> [sound]    
    (<span style="color: #F0DFAF; font-weight: bold;">let</span> [beat (metro)]
        (at (metro beat) (sound))
        (apply-at (metro (inc beat)) looper sound [])))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(looper (play-chord-sin2 '(80 69 46 73 86)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline40" class="outline-4">
<h4 id="orgheadline40"><span class="section-number-4">4.2.5</span> make a sawtooth chord player</h4>
<div class="outline-text-4" id="text-4-2-5">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">play-chord-saw1</span> [a-chord]
  (<span style="color: #F0DFAF; font-weight: bold;">doseq</span> [note a-chord] (saw1 (midi-&gt;hz note))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline41" class="outline-4">
<h4 id="orgheadline41"><span class="section-number-4">4.2.6</span> define a preselected set of chords for progression 9</h4>
<div class="outline-text-4" id="text-4-2-6">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">chord-progression-time9</span> []
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [time (now)]
    (at time          (play-chord-saw1 [68 81 46 50 88]))
    (at (+ 2000 time) (play-chord-saw1 [80 69 46 73 86]))
    (at (+ 4000 time) (play-chord-saw1 [68 59 48 85 64]))
    (at (+ 6000 time) (play-chord-saw1 [68 69 72 87 52]))
    (at (+ 8000 time) (play-chord-saw1 [89 55 45 60 62]))))
</pre>
</div>


<div class="org-src-container">

<pre class="src src-clojure">(chord-progression-time9)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline42" class="outline-4">
<h4 id="orgheadline42"><span class="section-number-4">4.2.7</span> refactor chord progressions to use a player-fn</h4>
<div class="outline-text-4" id="text-4-2-7">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">chord-progression-time10</span> [player-fn]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [time (now)]
    (at (+ 0.00 time) (player-fn [68 81 46 50 88]))
    (at (+ 2000 time) (player-fn [80 69 46 73 86]))
    (at (+ 4000 time) (player-fn [68 59 48 85 64]))
    (at (+ 6000 time) (player-fn [68 69 72 87 52]))
    (at (+ 8000 time) (player-fn [89 55 45 60 62]))))
</pre>
</div>


<div class="org-src-container">

<pre class="src src-clojure">(chord-progression-time10 play-chord-saw1)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline47" class="outline-2">
<h2 id="orgheadline47"><span class="section-number-2">5</span> from the 'sequencing' wiki tutorial</h2>
<div class="outline-text-2" id="text-5">
<p>
More typically, people like to listen to drum beats repeat, rather
than endless strings of dissonant chords.
</p>
</div>
<div id="outline-container-orgheadline45" class="outline-3">
<h3 id="orgheadline45"><span class="section-number-3">5.1</span> use kick on each beat of a metronome</h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">kick</span> (sample (freesound-path 2086)))

<span style="color: #5F7F5F;">; </span><span style="color: #7F9F7F;">setup a tempo for our metronome to use</span>
(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">forty-bpm</span> (metronome 40))

<span style="color: #5F7F5F;">; </span><span style="color: #7F9F7F;">this function will play our sound at whatever tempo we've set our metronome to </span>
(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">looper</span> [nome sound]    
    (<span style="color: #F0DFAF; font-weight: bold;">let</span> [beat (nome)]
        (at (nome beat) (sound))
        (apply-by (nome (inc beat)) looper nome sound [])))

<span style="color: #5F7F5F;">; </span><span style="color: #7F9F7F;">turn on the metronome</span>
(looper forty-bpm kick)
</pre>
</div>
<div class="org-src-container">

<pre class="src src-clojure">(stop)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline46" class="outline-3">
<h3 id="orgheadline46"><span class="section-number-3">5.2</span> startup a metronome and check in with its beats as it runs</h3>
<div class="outline-text-3" id="text-5-2">
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">; </span><span style="color: #7F9F7F;">to get a feel for how the metronome works, try defining one at the REPL</span>
(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">nome</span> (metronome 200))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(nome)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">; </span><span style="color: #7F9F7F;">setup a tempo for our metronome to use</span>
(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">forty-bpm</span> (metronome 40))

<span style="color: #5F7F5F;">; </span><span style="color: #7F9F7F;">this function will play our sound at whatever tempo we've set our metronome to </span>
(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">looper</span> [nome sound]    
    (<span style="color: #F0DFAF; font-weight: bold;">let</span> [beat (nome)]
        (at (nome beat) (sound))
        (apply-by (nome (inc beat)) looper nome sound [])))

<span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">turn on the metronome </span>
<span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">uh, where is 'piano' anything defined?</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">foo</span> [t freq]
  (at t (sin1 freq))
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [next-t (+ t 3000)
        next-f (+ freq 10)]
    (apply-by next-t #'foo [next-t next-f])))

(foo (now) 40)
</pre>
</div>

<p>
this one, using sin1 as defined above, gradually steps up and up
through the frequencies from a given fundamental
</p>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">foo</span> [t freq]
  (at t (sin1 freq))
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [next-t (+ t 6000)
        next-f (+ freq 10)]
    (apply-by next-t #'foo [next-t next-f])))

(foo (now) 40)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline50" class="outline-2">
<h2 id="orgheadline50"><span class="section-number-2">6</span> develop chords progressions (not "intro" enough&#x2013;should be moved elsewhere?)</h2>
<div class="outline-text-2" id="text-6">
<p>
Because I am interested in post-tonal music, the following is about
how to incorporate such sounds into overtone projects.
</p>
</div>
<div id="outline-container-orgheadline49" class="outline-3">
<h3 id="orgheadline49"><span class="section-number-3">6.1</span> start working with post tonal set classes</h3>
<div class="outline-text-3" id="text-6-1">
</div><div id="outline-container-orgheadline48" class="outline-4">
<h4 id="orgheadline48"><span class="section-number-4">6.1.1</span> getting-started babel session</h4>
<div class="outline-text-4" id="text-6-1-1">
<p>
note, this will only work if&#x2026;you are in the proper namespace. What
that really means is&#x2026;don't do this. 
</p>

<p>
Make sure that your data is loaded in a namespace declaration, i.e.
don't call this. There is a general preference for using a different
idiom than the following, which is very easy, but obscures some things
about how namespaces work.
</p>

<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">(load "set-class-data")</span>
</pre>
</div>

<p>
While the above seems so innocent, it fails to reveal anything about
where this file lives, which means you will be able to use things
defined in there with a false sense of security. "Everything just
works!" Until it doesn't. 
</p>

<p>
What should you do instead? Use <code>require</code> which will be described more
elsewhere [link]
</p>

<pre class="example">
nil
</pre>

<p>
#+COMMENT why do you want to hear an extremely high pitched sin wave?
</p>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">definst</span> <span style="color: #93E0E3;">med96</span> [] (* 0.01 (sin-osc (midi-&gt;hz 96))))

(med96)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline52" class="outline-2">
<h2 id="orgheadline52"><span class="section-number-2">7</span> miscellaneous utilities and problems</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-orgheadline51" class="outline-3">
<h3 id="orgheadline51"><span class="section-number-3">7.1</span> all caps is a problem&#x2013;clojure is case sensitive</h3>
<div class="outline-text-3" id="text-7-1">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #BFEBBF;">LET</span> [<span style="color: #BFEBBF;">TIME</span> (<span style="color: #BFEBBF;">NOW</span>) ]
     (
      (<span style="color: #BFEBBF;">AT</span> (+ 0 <span style="color: #BFEBBF;">TIME</span>) (PLAYER-FN '(1 2 3)))
      (<span style="color: #BFEBBF;">AT</span> (+ 1000 <span style="color: #BFEBBF;">TIME</span>) (PLAYER-FN '(4 5 6)))))
</pre>
</div>


<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">chord-prog-time11</span> [player-fn]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [<span style="color: #BFEBBF;">TIME</span> (<span style="color: #BFEBBF;">NOW</span>) ] 
       (<span style="color: #BFEBBF;">AT</span> (+ 0 <span style="color: #BFEBBF;">TIME</span>) (PLAYER-FN '(68 81 46 50 88)))
       (<span style="color: #BFEBBF;">AT</span> (+ 1000 <span style="color: #BFEBBF;">TIME</span>) (PLAYER-FN '(80 69 46 73 86)))
       (<span style="color: #BFEBBF;">AT</span> (+ 2000 <span style="color: #BFEBBF;">TIME</span>) (PLAYER-FN '(68 59 48 85 64)))
       (<span style="color: #BFEBBF;">AT</span> (+ 3000 <span style="color: #BFEBBF;">TIME</span>) (PLAYER-FN '(68 69 72 87 52)))
       (<span style="color: #BFEBBF;">AT</span> (+ 4000 <span style="color: #BFEBBF;">TIME</span>) (PLAYER-FN '(89 55 45 60 62)))))
</pre>
</div>


<div class="org-src-container">

<pre class="src src-clojure">(stop)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline54" class="outline-2">
<h2 id="orgheadline54"><span class="section-number-2">8</span> play piano in overtone</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-orgheadline53" class="outline-3">
<h3 id="orgheadline53"><span class="section-number-3">8.1</span> </h3>
<div class="outline-text-3" id="text-8-1">
<div class="org-src-container">

<pre class="src src-clojure">(use '<span style="color: #7CB8BB;">overtone.live</span>)

(use '<span style="color: #7CB8BB;">overtone.inst.sampled-piano</span>)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(midi-connected-devices)
</pre>
</div>

<pre class="example">
'((:description "Axiom A.I.R. Mini32 MIDI"  :vendor "M-Audio"  :sinks 0  :sources 2147483647  :name "MIDI"  :overtone.studio.midi/full-device-key (:midi-device "M-Audio" "MIDI" "Axiom A.I.R. Mini32 MIDI" 0)  :info #object(com.sun.media.sound.MidiInDeviceProvider$MidiInDeviceInfo 0x6fc3836b "MIDI")  :overtone.studio.midi/dev-num 0  :device #object(com.sun.media.sound.MidiInDevice 0x5e406927 "com.sun.media.sound.MidiInDevice@5e406927")  :version "Unknown version") (:description "Axiom A.I.R. Mini32 HyperControl"  :vendor "M-Audio"  :sinks 0  :sources 2147483647  :name "HyperControl"  :overtone.studio.midi/full-device-key (:midi-device "M-Audio" "HyperControl" "Axiom A.I.R. Mini32 HyperControl" 0)  :info #object(com.sun.media.sound.MidiInDeviceProvider$MidiInDeviceInfo 0x40d9b724 "HyperControl")  :overtone.studio.midi/dev-num 0  :device #object(com.sun.media.sound.MidiInDevice 0x534c9c7b "com.sun.media.sound.MidiInDevice@534c9c7b")  :version "Unknown version"))
</pre>

<div class="org-src-container">

<pre class="src src-clojure">(sampled-piano)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">piano-player</span> (midi-poly-player sampled-piano))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline55" class="outline-2">
<h2 id="orgheadline55"><span class="section-number-2">9</span> stop all playing sound</h2>
<div class="outline-text-2" id="text-9">
<div class="org-src-container">

<pre class="src src-clojure">(stop)
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: b</p>
<p class="date">Created: 2016-12-02 Fri 15:24</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
